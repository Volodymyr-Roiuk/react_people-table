(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{176:function(e,t,n){e.exports=n(305)},182:function(e,t,n){},183:function(e,t,n){},305:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(42),o=n.n(l),c=n(34),u=n(53),i=n.n(u),s=n(27),h=n(77),m=n(21),d=n(22),p=n(23),f=n(24),g=n(25),b=(n(182),n(314)),C=n(315),y=n(148),O=function(){var e=Object(h.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://mate-academy.github.io/react_people-table/api/people.json");case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),v=n(317),E=(n(183),function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.person,n=t.id,a=t.name,l=t.sex,o=t.age,c=t.born,u=t.died,i=t.century,s=t.father,h=t.mother,m=t.children,d=e.onClick,p=e.selectedId;return r.a.createElement(v.a.Row,{active:p===n,textAlign:"center",onClick:d,"data-person-id":n},r.a.createElement(v.a.Cell,null,n),r.a.createElement(v.a.Cell,{className:c<1650?"wasBornBefore1650":null},a),r.a.createElement(v.a.Cell,{className:"m"===l?"male":"female"},l),r.a.createElement(v.a.Cell,{className:o>=65?"ageMore65":null},o),r.a.createElement(v.a.Cell,null,c),r.a.createElement(v.a.Cell,null,u),r.a.createElement(v.a.Cell,null,i),r.a.createElement(v.a.Cell,null,h),r.a.createElement(v.a.Cell,null,s),r.a.createElement(v.a.Cell,null,m.map(function(e,t){return m.length-1!==t?"".concat(e.name,", "):e.name})))}}]),t}(a.PureComponent)),j=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={selectedPersonId:null},n.selectPerson=function(e){n.setState({selectedPersonId:Number(e.currentTarget.dataset.personId)})},n}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props.people,n=this.state.selectedPersonId;return r.a.createElement(v.a,{celled:!0,selectable:!0},r.a.createElement(v.a.Header,null,r.a.createElement(v.a.Row,{textAlign:"center"},r.a.createElement(v.a.HeaderCell,null,"id"),r.a.createElement(v.a.HeaderCell,null,"Name"),r.a.createElement(v.a.HeaderCell,null,"Sex"),r.a.createElement(v.a.HeaderCell,null,"Age"),r.a.createElement(v.a.HeaderCell,null,"Born"),r.a.createElement(v.a.HeaderCell,null,"Died"),r.a.createElement(v.a.HeaderCell,null,"Century"),r.a.createElement(v.a.HeaderCell,null,"Mother"),r.a.createElement(v.a.HeaderCell,null,"Father"),r.a.createElement(v.a.HeaderCell,null,"Children"))),r.a.createElement(v.a.Body,null,t.map(function(t,a){return r.a.createElement(E,{key:a+1,person:t,personId:a+1,onClick:e.selectPerson,selectedId:n})})))}}]),t}(a.PureComponent),x=n(316),w=n(306),P=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={addNewPerson:n.props.addNewPerson,showForm:!1,name:null,bornDate:null,deathDate:null,gender:null,mother:"",father:""},n.buttonClick=function(e){n.setState({showForm:!0})},n.getGenderOpinons=function(){return[{key:"male",text:"Male",value:"male"},{key:"female",text:"Female",value:"female"}]},n.nameChange=function(e){n.setState({name:e.target.value})},n.dateBornChange=function(e){n.setState({bornDate:e.target.value})},n.dateDeathChange=function(e){n.setState({deathDate:e.target.value})},n.motherChange=function(e){n.setState({mother:e.target.textContent})},n.fatherChange=function(e){n.setState({father:e.target.textContent})},n.genderChange=function(e){n.setState({gender:e.target.textContent})},n.getMotherOptions=function(e){var t=n.state.bornDate;if(null!==t)return e.filter(function(e){return e.born<t-10&&e.died>=t&&"f"===e.sex}).map(function(e){return{key:e.name,text:e.name,value:e.name}})},n.getFatherOptions=function(e){var t=n.state.bornDate;if(null!==t)return e.filter(function(e){return e.born<t-10&&e.died>=t&&"m"===e.sex}).map(function(e){return{key:e.name,text:e.name,value:e.name}})},n.onSubmit=function(e){var t=n.state,a=t.name,r=t.bornDate,l=t.deathDate,o=t.gender,c=t.mother,u=t.father;(0,t.addNewPerson)(a,r,l,"Male"===o?"m":"f",c,u),n.setState({showForm:!1,name:null,bornDate:null,deathDate:null,gender:null,mother:"",father:""})},n}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state,t=e.showForm,n=e.name,a=e.bornDate,l=e.deathDate,o=this.props.people,c=this.getGenderOpinons(),u=this.getMotherOptions(o),i=this.getFatherOptions(o);return t?r.a.createElement(x.a,null,r.a.createElement(x.a.Input,{fluid:!0,label:"Full name",placeholder:"Full name",value:n,onChange:this.nameChange}),r.a.createElement(x.a.Group,{widths:"equal"},r.a.createElement(x.a.Input,{fluid:!0,label:"Year of born",placeholder:"xxxx",value:a,onChange:this.dateBornChange}),r.a.createElement(x.a.Input,{fluid:!0,label:"Year of death",placeholder:"xxxx",value:l,onChange:this.dateDeathChange})),r.a.createElement(x.a.Group,{widths:"equal"},r.a.createElement(x.a.Select,{label:"Mother",placeholder:"Mother",options:u,onChange:this.motherChange}),r.a.createElement(x.a.Select,{label:"Father",placeholder:"Father",options:i,onChange:this.fatherChange})),r.a.createElement(x.a.Select,{placeholder:"Gender",options:c,onChange:this.genderChange}),r.a.createElement(w.a,{className:"option__item",onClick:this.onSubmit},"Add new person")):r.a.createElement(w.a,{className:"option__item",onClick:this.buttonClick},"New Person")}}]),t}(a.Component);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach(function(t){Object(s.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var F=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={people:[],filterQuery:"",sortQuery:null},n.getPeople=function(e){return e.people},n.getFilterQuery=function(e){return e.filterQuery},n.getFilteredPeople=Object(y.a)([n.getPeople,n.getFilterQuery],function(e,t){return e.filter(function(e){return e.name.includes(t)||e.father.includes(t)||e.mother.includes(t)})}),n.loadPeopleFromServer=Object(h.a)(i.a.mark(function e(){var t,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:t=e.sent,a=t.map(function(e,n){return S({},e,{id:n+1,age:e.died-e.born,century:Math.ceil(e.died/100),father:e.father?e.father:"",mother:e.mother?e.mother:"",children:t.filter(function(t){return t.father===e.name||t.mother===e.name})})}),n.setState({people:a,filteredPeople:a});case 5:case"end":return e.stop()}},e)})),n.changeFilterValue=function(e){n.setState({filterQuery:e.target.value})},n.getSelectOptions=function(){return[{key:"id",value:"id",text:"id"},{key:"name",value:"name",text:"name"},{key:"sex",value:"sex",text:"sex"},{key:"age",value:"age",text:"age"},{key:"born",value:"born",text:"born"},{key:"died",value:"died",text:"died"},{key:"century",value:"century",text:"century"}]},n.changeSelectValue=function(e){n.setState({sortQuery:e.target.textContent})},n.sortPeople=function(e,t){switch(t){case"id":return Object(c.a)(e).sort(function(e,t){return e.id-t.id});case"name":return Object(c.a)(e).sort(function(e,t){return e.name.localeCompare(t.name)});case"sex":return Object(c.a)(e).sort(function(e,t){return e.sex.localeCompare(t.sex)});case"age":return Object(c.a)(e).sort(function(e,t){return e.age-t.age});case"born":return Object(c.a)(e).sort(function(e,t){return e.born-t.born});case"died":return Object(c.a)(e).sort(function(e,t){return e.died-t.died});case"century":return Object(c.a)(e).sort(function(e,t){return e.century-t.century});default:return e}},n.addNewPerson=function(e,t,a,r,l,o){n.setState(function(n){var u=n.people,i={id:u.length+1,name:e,mother:l,father:o,sex:r,born:t,died:a,age:a-t,century:Math.ceil(a/100),children:u.filter(function(t){return t.father===e||t.mother===e})};return{people:[].concat(Object(c.a)(u),[i])}})},n}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.loadPeopleFromServer()}},{key:"render",value:function(){var e=this.state,t=e.filterQuery,n=e.sortQuery,a=this.getSelectOptions(),l=this.getFilteredPeople(this.state),o=this.sortPeople(l,n);return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"optionsContainer"},r.a.createElement(b.a,{className:"option__item",placeholder:"Filter...",value:t,onChange:this.changeFilterValue}),r.a.createElement(C.a,{className:"option__item",placeholder:"Sort by...",options:a,onChange:this.changeSelectValue}),r.a.createElement(P,{className:"option__item",people:this.state.people,addNewPerson:this.addNewPerson})),r.a.createElement(j,{people:o}))}}]),t}(r.a.PureComponent);o.a.render(r.a.createElement(F,{test:123}),document.getElementById("root"))}},[[176,1,2]]]);
//# sourceMappingURL=main.12ce8a5a.chunk.js.map